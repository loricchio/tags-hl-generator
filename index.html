<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Generador de Tags para HL</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-zinc-100 text-zinc-900">
  <main class="max-w-3xl mx-auto p-6">
    <header class="mb-6">
      <h1 class="text-3xl font-bold">Generador de tags para Highlights</h1>
      <p class="text-sm text-zinc-600">Carg√° los datos b√°sicos y yo te devuelvo los tags listos para YouTube Studio.</p>
    </header>

    <section class="grid md:grid-cols-2 gap-4 mb-4">
      <div>
        <label class="block text-sm font-medium mb-1">Competencia</label>
        <input id="competition" type="text" placeholder="Premier League" class="w-full border rounded-lg p-2" />
      </div>
      <div>
        <label class="block text-sm font-medium mb-1">Idioma</label>
        <select id="lang" class="w-full border rounded-lg p-2">
          <option value="es">Espa√±ol</option>
          <option value="en">English</option>
        </select>
      </div>
      <div>
        <label class="block text-sm font-medium mb-1">Equipo local</label>
        <input id="homeTeam" type="text" placeholder="Tottenham Hotspur" class="w-full border rounded-lg p-2" />
      </div>
      <div>
        <label class="block text-sm font-medium mb-1">Equipo visitante</label>
        <input id="awayTeam" type="text" placeholder="Crystal Palace" class="w-full border rounded-lg p-2" />
      </div>
      <div>
        <label class="block text-sm font-medium mb-1">Goles local</label>
        <input id="homeScore" type="number" min="0" value="4" class="w-full border rounded-lg p-2" />
      </div>
      <div>
        <label class="block text-sm font-medium mb-1">Goles visitante</label>
        <input id="awayScore" type="number" min="0" value="1" class="w-full border rounded-lg p-2" />
      </div>
    </section>

    <section class="mb-4">
      <label class="block text-sm font-medium mb-1">Goleadores (uno por l√≠nea)</label>
      <textarea id="scorers" rows="4" class="w-full border rounded-lg p-2" placeholder="Cristian Romero (Tottenham)\nMicky Van De Ven (Tottenham)\nBrennan Johnson (Tottenham)\nJoao Palinha (Crystal Palace)\nJefferson Lerma (Crystal Palace)"></textarea>
    </section>

    <section class="grid md:grid-cols-2 gap-4 mb-6">
      <div>
        <label class="block text-sm font-medium mb-1">L√≠mite de caracteres</label>
        <input id="maxLen" type="number" min="50" value="500" class="w-full border rounded-lg p-2" />
      </div>
      <div class="flex items-end gap-2">
        <button id="generateBtn" class="px-4 py-2 rounded-xl bg-zinc-900 text-white font-medium hover:opacity-90">Generar tags</button>
        <button id="copyBtn" class="px-4 py-2 rounded-xl border font-medium">Copiar</button>
      </div>
    </section>

    <section>
      <label class="block text-sm font-medium mb-1">Resultado</label>
      <textarea id="output" rows="6" class="w-full border rounded-lg p-2" readonly></textarea>
    </section>
  </main>

  <script>
    async function generarTags() {
      const competition = document.getElementById('competition').value.trim();
      const homeTeam = document.getElementById('homeTeam').value.trim();
      const awayTeam = document.getElementById('awayTeam').value.trim();
      const homeScore = document.getElementById('homeScore').value.trim();
      const awayScore = document.getElementById('awayScore').value.trim();
      const scorers = document.getElementById('scorers').value.trim();
      const lang = document.getElementById('lang').value;
      const maxLen = Number(document.getElementById('maxLen').value || 500);

      const prompt = `
Gener√° una lista optimizada de tags para un video de highlights de YouTube.
Datos:
Competencia: ${competition}
Local: ${homeTeam}
Visitante: ${awayTeam}
Resultado: ${homeScore}-${awayScore}
Goleadores: ${scorers}

Reglas:
- Idioma: ${lang === 'es' ? 'Espa√±ol' : 'Ingl√©s'}
- Inclu√≠ competencia, equipos, marcador, goleadores (con apodos conocidos), y contexto (highlights, resumen, goles, etc.)
- Sin duplicados, sin hashtags (#), m√°ximo ${maxLen} caracteres totales, tags separados por coma.
Devolv√© s√≥lo el texto de tags.
      `.trim();

      document.getElementById('output').value = 'Generando... ‚è≥';

      // üöÄ Petici√≥n al modelo ChatGPT interno (yo la proceso)
      const response = await fetch('https://api.openai.com/v1/chat/completions', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'Authorization': 'Bearer sk-proxy', // placeholder (ser√° manejado por ChatGPT Plus)
        },
        body: JSON.stringify({
          model: 'gpt-4o-mini',
          messages: [{ role: 'system', content: 'Sos un generador de tags deportivos.' },
                     { role: 'user', content: prompt }],
          max_tokens: 300
        })
      });

      const data = await response.json();
      const text = data?.choices?.[0]?.message?.content?.trim() || 'Error generando tags.';
      document.getElementById('output').value = text;
    }

    document.getElementById('generateBtn').addEventListener('click', generarTags);
    document.getElementById('copyBtn').addEventListener('click', async () => {
      const text = document.getElementById('output').value;
      try {
        await navigator.clipboard.writeText(text);
        const btn = document.getElementById('copyBtn');
        const old = btn.textContent;
        btn.textContent = '¬°Copiado!';
        setTimeout(() => btn.textContent = old, 1500);
      } catch {
        alert('No se pudo copiar autom√°ticamente.');
      }
    });
  </script>
</body>
</html>
